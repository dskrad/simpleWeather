<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN"
"http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html>
  <head>            
    <title>David's Local Weather</title>
    <link rel="stylesheet" href="style.css"/>
  </head>
  <body>
    <div id="weather"></div>
    <div id="clock"></div>
    <script src="http://code.jquery.com/jquery-2.1.4.min.js"></script>
    <script src="jquery.simpleWeather.js"></script>
    <script>
      $(document).ready(function() {
        getWeather();
        setInterval(getWeather, 600000); //update every 10 minutes
        setInterval(showClock, 500);
      });
      
      function getWeather() {
        $.simpleWeather({
          woeid: '12760168',
          location: '',
          unit: 'f',
          success: function(weather) {
          html = '<h2><i class="icon-'+weather.code+'"></i> '
            html += weather.temp+'&deg;'+weather.units.temp+'</h2>';
            html += '<ul><li>'+weather.city+', '+weather.region+'</li>';
            html += '<li class="currently">'+weather.currently+'</li>';
            html += '<li>'+weather.alt.temp+'&deg;C</li></ul>';
            
            for(var i=0;i<weather.forecast.length;i++) {
              html += '<p>'+weather.forecast[i].day+': '+weather.forecast[i].high+'</p>';
            }
        
            $("#weather").html(html);
          },
          error: function(error) {
            $("#weather").html('<p>'+error+'</p>');
          }
        });
      };
      
      function showClock() {
        var today = new Date();
        var h = today.getHours();
        var m = today.getMinutes();
        if (m < 10) {m = "0" + m};  // add zero in front of numbers < 10
        $("#clock").html(h + ":" + m);
      };
     
    </script>
  </body>
</html>

